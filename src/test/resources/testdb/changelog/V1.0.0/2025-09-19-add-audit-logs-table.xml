<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="2025-09-19-add-audit-logs-table" author="alexandr.glukhov">
        <sql>
            CREATE TABLE feature_toggle.audit_logs
            (
                id              BIGSERIAL PRIMARY KEY,
                entity_type     VARCHAR(100) NOT NULL,
                entity_id       VARCHAR(50)  NOT NULL,
                action          VARCHAR(50)  NOT NULL,
                old_value       TEXT,
                new_value       TEXT,
                changed_by_name VARCHAR(255) NOT NULL,
                changed_by_id   VARCHAR(255) NOT NULL,
                created_at      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            );

            CREATE INDEX idx_audit_logs_entity ON feature_toggle.audit_logs (entity_type, entity_id);
        </sql>
    </changeSet>
</databaseChangeLog>